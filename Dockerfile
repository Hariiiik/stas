# 1. Беремо базову "операційну систему" з уже встановленим Node.js (версія 18)
# "alpine" означає, що це дуже легка, обрізана версія Linux
FROM node:18-alpine

# 2. Створюємо папку /app всередині контейнера і переходимо в неї
WORKDIR /app

# 3. Копіюємо файл зі списком бібліотек у контейнер
COPY package*.json ./

# 4. Встановлюємо всі бібліотеки всередині контейнера
RUN npm install

# 5. Копіюємо весь твій код (всі файли проєкту) у контейнер
COPY . .

# 6. Збираємо React-додаток (перетворюємо код у папку dist)
RUN npm run build

# 7. Кажемо, що наша програма працюватиме на порті 3001
EXPOSE 3001

# 8. Команда, яка запуститься, коли ми увімкнемо контейнер
CMD ["node", "server.js"]